# 청킹 문서 예시 및 연습문제 생성 결과

## 1. 청킹된 문서 예시

기출문제 원본 데이터가 RAG 검색에 최적화된 청크(chunk)로 변환된 결과입니다.
각 청크는 **텍스트**(검색/임베딩 대상)와 **메타데이터**(필터링/분류용)로 구성됩니다.

---

### 청크 예시 1 — 소프트웨어 설계 (디자인 패턴)

**텍스트:**

```
[2024년 1회 제1문]
분야: 소프트웨어 설계 > 디자인 패턴

문제:
다음은 디자인 패턴에 대한 설명이다. 각 설명에 해당하는 디자인 패턴의 이름을 쓰시오.
(1) 객체를 생성하기 위한 인터페이스를 정의하지만, 어떤 클래스의 인스턴스를 생성할지는
    서브클래스가 결정하게 하는 패턴
(2) 복잡한 객체의 생성 과정과 표현 방법을 분리하여 동일한 생성 절차에서 서로 다른
    표현 결과를 만들 수 있게 하는 패턴
(3) 한 객체의 상태가 바뀌면 그 객체에 의존하는 다른 객체들에게 연락이 가고
    자동으로 내용이 갱신되는 패턴

정답:
(1) Factory Method (팩토리 메서드)
(2) Builder (빌더)
(3) Observer (옵서버)

키워드: 디자인 패턴, Factory Method, Builder, Observer, 생성 패턴, 행위 패턴
```

**메타데이터:**

```json
{
  "chunk_id": "0",
  "year": "2024",
  "session": "1회",
  "number": "1",
  "category": "소프트웨어 설계",
  "subcategory": "디자인 패턴",
  "keywords": "디자인 패턴, Factory Method, Builder, Observer, 생성 패턴, 행위 패턴"
}
```

---

### 청크 예시 2 — 데이터베이스 (SQL)

**텍스트:**

```
[2024년 1회 제2문]
분야: 데이터베이스 > SQL

문제:
다음 SQL문의 실행 결과를 쓰시오.

[학생] 테이블
| 학번 | 이름 | 학과 | 성적 |
|------|------|------|------|
| 1001 | 홍길동 | 컴퓨터 | 3.5 |
| 1002 | 김철수 | 전자 | 4.0 |
| 1003 | 이영희 | 컴퓨터 | 3.8 |
| 1004 | 박민수 | 전자 | 3.2 |
| 1005 | 최지영 | 컴퓨터 | 4.5 |

SELECT 학과, COUNT(*) AS 학생수, AVG(성적) AS 평균성적
FROM 학생
GROUP BY 학과
HAVING AVG(성적) >= 3.5;

정답:
| 학과 | 학생수 | 평균성적 |
|------|--------|----------|
| 컴퓨터 | 3 | 3.93 |
| 전자 | 2 | 3.6 |

키워드: SQL, GROUP BY, HAVING, 집계 함수, COUNT, AVG
```

**메타데이터:**

```json
{
  "chunk_id": "1",
  "year": "2024",
  "session": "1회",
  "number": "2",
  "category": "데이터베이스",
  "subcategory": "SQL",
  "keywords": "SQL, GROUP BY, HAVING, 집계 함수, COUNT, AVG"
}
```

---

### 청크 예시 3 — 프로그래밍 (C언어)

**텍스트:**

```
[2024년 1회 제3문]
분야: 프로그래밍 > C언어

문제:
다음 C 프로그램의 실행 결과를 쓰시오.

#include <stdio.h>
int main() {
    int a[5] = {1, 2, 3, 4, 5};
    int *p = a;
    int sum = 0;
    for(int i = 0; i < 5; i++) {
        sum += *(p + i);
    }
    printf("%d\n", sum);
    return 0;
}

정답:
15

키워드: C언어, 포인터, 배열, 포인터 연산, 반복문
```

**메타데이터:**

```json
{
  "chunk_id": "2",
  "year": "2024",
  "session": "1회",
  "number": "3",
  "category": "프로그래밍",
  "subcategory": "C언어",
  "keywords": "C언어, 포인터, 배열, 포인터 연산, 반복문"
}
```

---

## 2. 연습문제 생성 결과

키워드 **"SQL"** 을 입력했을 때의 실제 실행 결과입니다.
벡터 유사도 검색으로 관련 기출문제 3건을 찾아 참고자료로 제시합니다.

> OpenAI API 키를 설정하면 AI가 아래 기출문제를 참조하여 **새로운 연습문제를 자동 생성**합니다.
> 아래는 API 키 없이 실행한 템플릿 기반 결과입니다.

```
=== 'SQL' 관련 연습문제 ===

아래 기출문제를 참고하여 직접 연습해 보세요:

==================================================
[참고 기출문제 1]
출처: 2024년 1회
분야: 데이터베이스
유사도: 60.8%

[2024년 1회 제2문]
분야: 데이터베이스 > SQL

문제:
다음 SQL문의 실행 결과를 쓰시오.

[학생] 테이블
| 학번 | 이름 | 학과 | 성적 |
|------|------|------|------|
| 1001 | 홍길동 | 컴퓨터 | 3.5 |
| 1002 | 김철수 | 전자 | 4.0 |
| 1003 | 이영희 | 컴퓨터 | 3.8 |
| 1004 | 박민수 | 전자 | 3.2 |
| 1005 | 최지영 | 컴퓨터 | 4.5 |

SELECT 학과, COUNT(*) AS 학생수, AVG(성적) AS 평균성적
FROM 학생
GROUP BY 학과
HAVING AVG(성적) >= 3.5;

정답:
| 학과 | 학생수 | 평균성적 |
|------|--------|----------|
| 컴퓨터 | 3 | 3.93 |
| 전자 | 2 | 3.6 |

키워드: SQL, GROUP BY, HAVING, 집계 함수, COUNT, AVG

==================================================
[참고 기출문제 2]
출처: 2023년 1회
분야: 데이터베이스
유사도: 59.4%

[2023년 1회 제2문]
분야: 데이터베이스 > SQL

문제:
다음 SQL문의 실행 결과를 쓰시오.

[사원] 테이블
| 사번 | 이름 | 부서 | 급여 |
|------|------|------|------|
| 101 | 김민수 | 개발 | 3000 |
| 102 | 이지연 | 인사 | 2800 |
| 103 | 박서준 | 개발 | 3500 |
| 104 | 최유리 | 영업 | 2500 |
| 105 | 정하늘 | 개발 | 4000 |

SELECT 부서, MAX(급여) - MIN(급여) AS 급여차이
FROM 사원
GROUP BY 부서
ORDER BY 급여차이 DESC;

정답:
| 부서 | 급여차이 |
|------|----------|
| 개발 | 1000 |
| 인사 | 0 |
| 영업 | 0 |

키워드: SQL, GROUP BY, ORDER BY, MAX, MIN, 집계 함수

==================================================
[참고 기출문제 3]
출처: 2022년 2회
분야: 데이터베이스
유사도: 58.9%

[2022년 2회 제2문]
분야: 데이터베이스 > SQL

문제:
다음 SQL문의 실행 결과를 쓰시오.

[성적] 테이블
| 학번 | 과목 | 점수 |
|------|------|------|
| 100 | 국어 | 85 |
| 100 | 수학 | 90 |
| 200 | 국어 | 70 |
| 200 | 수학 | 75 |
| 300 | 국어 | 95 |

SELECT 학번, SUM(점수) AS 총점
FROM 성적
WHERE 점수 >= 80
GROUP BY 학번
HAVING SUM(점수) >= 170
ORDER BY 총점 DESC;

정답:
| 학번 | 총점 |
|------|------|
| 100 | 175 |

키워드: SQL, WHERE, GROUP BY, HAVING, SUM, ORDER BY

==================================================

[연습 가이드]
1. 위 기출문제의 핵심 개념을 정리해 보세요.
2. 유사한 문제를 스스로 만들어 풀어 보세요.
3. 'SQL' 관련 추가 개념을 학습하세요.

Tip: .env 파일에 OPENAI_API_KEY를 설정하면 AI가 자동으로 새로운 연습문제를 생성합니다.
```

### 동작 흐름 요약

```
키워드 입력 ("SQL")
    │
    ▼
[벡터 유사도 검색] ── ChromaDB + ko-sroberta 임베딩
    │
    ▼
관련 기출문제 Top-K 검색 (유사도 순)
    │
    ▼
[연습문제 생성] ── OpenAI API (또는 템플릿 폴백)
    │
    ▼
결과 출력
```
