# 청킹 문서 예시 및 연습문제 생성 결과

## 1. 청킹된 문서 예시

기출문제 원본 데이터가 RAG 검색에 최적화된 청크(chunk)로 변환된 결과입니다.
각 청크는 **텍스트**(검색/임베딩 대상)와 **메타데이터**(필터링/분류용)로 구성됩니다.

---

### 청크 예시 1 — 소프트웨어 설계 (디자인 패턴)

**텍스트:**

```
[2024년 1회 제1문]
분야: 소프트웨어 설계 > 디자인 패턴

문제:
다음은 디자인 패턴에 대한 설명이다. 각 설명에 해당하는 디자인 패턴의 이름을 쓰시오.
(1) 객체를 생성하기 위한 인터페이스를 정의하지만, 어떤 클래스의 인스턴스를 생성할지는
    서브클래스가 결정하게 하는 패턴
(2) 복잡한 객체의 생성 과정과 표현 방법을 분리하여 동일한 생성 절차에서 서로 다른
    표현 결과를 만들 수 있게 하는 패턴
(3) 한 객체의 상태가 바뀌면 그 객체에 의존하는 다른 객체들에게 연락이 가고
    자동으로 내용이 갱신되는 패턴

정답:
(1) Factory Method (팩토리 메서드)
(2) Builder (빌더)
(3) Observer (옵서버)

키워드: 디자인 패턴, Factory Method, Builder, Observer, 생성 패턴, 행위 패턴
```

**메타데이터:**

```json
{
  "chunk_id": "0",
  "year": "2024",
  "session": "1회",
  "number": "1",
  "category": "소프트웨어 설계",
  "subcategory": "디자인 패턴",
  "keywords": "디자인 패턴, Factory Method, Builder, Observer, 생성 패턴, 행위 패턴"
}
```

---

### 청크 예시 2 — 데이터베이스 (SQL)

**텍스트:**

```
[2024년 1회 제2문]
분야: 데이터베이스 > SQL

문제:
다음 SQL문의 실행 결과를 쓰시오.

[학생] 테이블
| 학번 | 이름 | 학과 | 성적 |
|------|------|------|------|
| 1001 | 홍길동 | 컴퓨터 | 3.5 |
| 1002 | 김철수 | 전자 | 4.0 |
| 1003 | 이영희 | 컴퓨터 | 3.8 |
| 1004 | 박민수 | 전자 | 3.2 |
| 1005 | 최지영 | 컴퓨터 | 4.5 |

SELECT 학과, COUNT(*) AS 학생수, AVG(성적) AS 평균성적
FROM 학생
GROUP BY 학과
HAVING AVG(성적) >= 3.5;

정답:
| 학과 | 학생수 | 평균성적 |
|------|--------|----------|
| 컴퓨터 | 3 | 3.93 |
| 전자 | 2 | 3.6 |

키워드: SQL, GROUP BY, HAVING, 집계 함수, COUNT, AVG
```

**메타데이터:**

```json
{
  "chunk_id": "1",
  "year": "2024",
  "session": "1회",
  "number": "2",
  "category": "데이터베이스",
  "subcategory": "SQL",
  "keywords": "SQL, GROUP BY, HAVING, 집계 함수, COUNT, AVG"
}
```

---

### 청크 예시 3 — 프로그래밍 (C언어)

**텍스트:**

```
[2024년 1회 제3문]
분야: 프로그래밍 > C언어

문제:
다음 C 프로그램의 실행 결과를 쓰시오.

#include <stdio.h>
int main() {
    int a[5] = {1, 2, 3, 4, 5};
    int *p = a;
    int sum = 0;
    for(int i = 0; i < 5; i++) {
        sum += *(p + i);
    }
    printf("%d\n", sum);
    return 0;
}

정답:
15

키워드: C언어, 포인터, 배열, 포인터 연산, 반복문
```

**메타데이터:**

```json
{
  "chunk_id": "2",
  "year": "2024",
  "session": "1회",
  "number": "3",
  "category": "프로그래밍",
  "subcategory": "C언어",
  "keywords": "C언어, 포인터, 배열, 포인터 연산, 반복문"
}
```

---

## 2. 연습문제 생성 결과

키워드 **"SQL"** 을 입력했을 때의 실제 실행 결과입니다.
벡터 유사도 검색으로 관련 기출문제 3건을 찾아 참고자료로 제시합니다.

> OpenAI API 키를 설정하면 AI가 아래 기출문제를 참조하여 **새로운 연습문제를 자동 생성**합니다.
> 아래는 API 키 없이 실행한 템플릿 기반 결과입니다.

```
=== 'SQL' 관련 연습문제 ===

아래 기출문제를 참고하여 직접 연습해 보세요:

==================================================
[참고 기출문제 1]
출처: 2024년 1회
분야: 데이터베이스
유사도: 60.8%

[2024년 1회 제2문]
분야: 데이터베이스 > SQL

문제:
다음 SQL문의 실행 결과를 쓰시오.

[학생] 테이블
| 학번 | 이름 | 학과 | 성적 |
|------|------|------|------|
| 1001 | 홍길동 | 컴퓨터 | 3.5 |
| 1002 | 김철수 | 전자 | 4.0 |
| 1003 | 이영희 | 컴퓨터 | 3.8 |
| 1004 | 박민수 | 전자 | 3.2 |
| 1005 | 최지영 | 컴퓨터 | 4.5 |

SELECT 학과, COUNT(*) AS 학생수, AVG(성적) AS 평균성적
FROM 학생
GROUP BY 학과
HAVING AVG(성적) >= 3.5;

정답:
| 학과 | 학생수 | 평균성적 |
|------|--------|----------|
| 컴퓨터 | 3 | 3.93 |
| 전자 | 2 | 3.6 |

키워드: SQL, GROUP BY, HAVING, 집계 함수, COUNT, AVG

==================================================
[참고 기출문제 2]
출처: 2023년 1회
분야: 데이터베이스
유사도: 59.4%

[2023년 1회 제2문]
분야: 데이터베이스 > SQL

문제:
다음 SQL문의 실행 결과를 쓰시오.

[사원] 테이블
| 사번 | 이름 | 부서 | 급여 |
|------|------|------|------|
| 101 | 김민수 | 개발 | 3000 |
| 102 | 이지연 | 인사 | 2800 |
| 103 | 박서준 | 개발 | 3500 |
| 104 | 최유리 | 영업 | 2500 |
| 105 | 정하늘 | 개발 | 4000 |

SELECT 부서, MAX(급여) - MIN(급여) AS 급여차이
FROM 사원
GROUP BY 부서
ORDER BY 급여차이 DESC;

정답:
| 부서 | 급여차이 |
|------|----------|
| 개발 | 1000 |
| 인사 | 0 |
| 영업 | 0 |

키워드: SQL, GROUP BY, ORDER BY, MAX, MIN, 집계 함수

==================================================
[참고 기출문제 3]
출처: 2022년 2회
분야: 데이터베이스
유사도: 58.9%

[2022년 2회 제2문]
분야: 데이터베이스 > SQL

문제:
다음 SQL문의 실행 결과를 쓰시오.

[성적] 테이블
| 학번 | 과목 | 점수 |
|------|------|------|
| 100 | 국어 | 85 |
| 100 | 수학 | 90 |
| 200 | 국어 | 70 |
| 200 | 수학 | 75 |
| 300 | 국어 | 95 |

SELECT 학번, SUM(점수) AS 총점
FROM 성적
WHERE 점수 >= 80
GROUP BY 학번
HAVING SUM(점수) >= 170
ORDER BY 총점 DESC;

정답:
| 학번 | 총점 |
|------|------|
| 100 | 175 |

키워드: SQL, WHERE, GROUP BY, HAVING, SUM, ORDER BY

==================================================

[연습 가이드]
1. 위 기출문제의 핵심 개념을 정리해 보세요.
2. 유사한 문제를 스스로 만들어 풀어 보세요.
3. 'SQL' 관련 추가 개념을 학습하세요.

Tip: .env 파일에 OPENAI_API_KEY를 설정하면 AI가 자동으로 새로운 연습문제를 생성합니다.
```

---

## 3. LLM 기반 실제 연습문제 생성 결과

OpenAI API 키를 설정한 후 키워드 **"SQL"** 로 실행한 결과입니다.
기출문제의 형식과 난이도를 참고하여 **완전히 새로운 문제**를 자동 생성합니다.

```
[문제 1]
다음 SQL문의 실행 결과를 쓰시오.

[수업] 테이블
| 수업코드 | 과목명 | 교수명 | 수강생수 |
|------|------|------|------|
| C101 | 데이터베이스 | 김교수 | 25 |
| C102 | 알고리즘 | 이교수 | 30 |
| C103 | 운영체제 | 박교수 | 20 |
| C104 | 데이터베이스 | 최교수 | 28 |
| C105 | 알고리즘 | 정교수 | 35 |

SELECT 과목명, SUM(수강생수) AS 총수강생수
FROM 수업
GROUP BY 과목명
HAVING SUM(수강생수) > 50;

[정답]
| 과목명 | 총수강생수 |
|------|--------|
| 데이터베이스 | 53 |
| 알고리즘 | 65 |

[해설]
'수업' 테이블에서 과목명을 기준으로 그룹화하고, 수강생수를 합산하여
50명 초과인 과목만 선택했다. 데이터베이스와 알고리즘 과목이 조건을 만족한다.

---

[문제 2]
다음 SQL문의 실행 결과를 쓰시오.

[프로젝트] 테이블
| 프로젝트ID | 이름 | 시작일 | 종료일 | 예산 |
|------|------|----------|----------|------|
| 1 | 프로젝트 A | 2023-01-01 | 2023-06-30 | 500000 |
| 2 | 프로젝트 B | 2023-02-01 | 2023-07-15 | 300000 |
| 3 | 프로젝트 C | 2023-03-01 | 2023-08-31 | 700000 |
| 4 | 프로젝트 D | 2023-01-15 | 2023-05-15 | 200000 |
| 5 | 프로젝트 E | 2023-03-20 | 2023-09-20 | 400000 |

SELECT 이름, MAX(예산) - MIN(예산) AS 예산차이
FROM 프로젝트
GROUP BY 이름
ORDER BY 예산차이 DESC;

[정답]
| 이름 | 예산차이 |
|------|----------|
| 프로젝트 C | 400000 |
| 프로젝트 A | 300000 |
| 프로젝트 E | 300000 |
| 프로젝트 B | 0 |
| 프로젝트 D | 0 |

[해설]
'프로젝트' 테이블에서 이름에 따라 그룹화하고 예산의 최대값과 최소값의 차이를
계산하여 예산 차이를 구했다. 예산 차이가 큰 순서로 정렬했다.

---

[문제 3]
다음 SQL문의 실행 결과를 쓰시오.

[판매] 테이블
| 판매ID | 상품명 | 수량 | 판매가 |
|------|------|------|------|
| 1 | 노트북 | 5 | 1000000 |
| 2 | 스마트폰 | 10 | 800000 |
| 3 | 태블릿 | 7 | 600000 |
| 4 | 노트북 | 3 | 900000 |
| 5 | 스마트폰 | 5 | 700000 |

SELECT 상품명, SUM(수량) AS 총수량, SUM(판매가) AS 총판매가
FROM 판매
GROUP BY 상품명
HAVING SUM(수량) > 6;

[정답]
| 상품명 | 총수량 | 총판매가 |
|------|--------|----------|
| 노트북 | 8 | 1900000 |
| 스마트폰 | 15 | 1500000 |

[해설]
'판매' 테이블에서 상품명으로 그룹화하고, 각 상품의 수량과 판매가를 합산하여
수량이 6개 초과인 상품만 선택했다. 노트북과 스마트폰이 결과로 나타난다.
```

---

### 동작 흐름 요약

```
키워드 입력 ("SQL")
    │
    ▼
[벡터 유사도 검색] ── ChromaDB + ko-sroberta 임베딩
    │
    ▼
관련 기출문제 Top-K 검색 (유사도 순)
    │
    ▼
[연습문제 생성] ── OpenAI API (gpt-4o-mini)
    │
    ▼
새로운 연습문제 + 정답 + 해설 출력
```
